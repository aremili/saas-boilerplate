{% extends "base.html" %}
{% from "components/macros.html" import alert, badge, button %}

{% block content %}
<div class="container mx-auto p-8 max-w-4xl">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">
        Stimulus + Jinja2 Components Demo
    </h1>
    <p class="text-gray-600 mb-8">
        Examples of combining Stimulus controllers with Jinja2 template components.
    </p>

    {# ===== ALERTS SECTION ===== #}
    <section class="mb-10">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
            Alerts
            {{ badge("Macro", color="purple") }}
        </h2>
        <div class="space-y-3">
            {{ alert("This is an info alert â€” click the X to dismiss!", type="info") }}
            {{ alert("Success! Your changes have been saved.", type="success") }}
            {{ alert("Warning: This action cannot be undone.", type="warning") }}
            {{ alert("This alert will auto-dismiss in 5 seconds.", type="error", auto_dismiss=5000) }}
        </div>
    </section>

    {# ===== COUNTER SECTION ===== #}
    <section class="mb-10">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
            Counter
            {{ badge("Values", color="blue") }}
        </h2>
        <p class="text-sm text-gray-500 mb-4">
            Demonstrates passing values from Jinja2 to Stimulus via <code
                class="bg-gray-100 px-1 rounded">data-*-value</code> attributes.
        </p>
        <div class="flex flex-wrap gap-6 items-center">
            {% with initial=5, min=0, max=10, label="Quantity (0-10)", show_reset=true %}
            {% include "components/counter.html" %}
            {% endwith %}

            {% with initial=100, step=10, label="Price" %}
            {% include "components/counter.html" %}
            {% endwith %}
        </div>
    </section>

    {# ===== DROPDOWN SECTION ===== #}
    <section class="mb-10">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
            Dropdown
            {{ badge("Include", color="green") }}
        </h2>
        <p class="text-sm text-gray-500 mb-4">Click outside or press Escape to close.</p>
        <div class="flex gap-4">
            {% with label="Actions", items=[
            {"text": "Edit", "href": "#edit"},
            {"text": "Duplicate", "href": "#duplicate"},
            {"text": "Archive", "href": "#archive"},
            {"text": "Delete", "href": "#delete"}
            ] %}
            {% include "components/dropdown.html" %}
            {% endwith %}

            {% with label="Account", items=[
            {"text": "Profile", "href": "#profile"},
            {"text": "Settings", "href": "#settings"},
            {"text": "Logout", "href": "#logout"}
            ] %}
            {% include "components/dropdown.html" %}
            {% endwith %}
        </div>
    </section>

    {# ===== MODAL SECTION ===== #}
    <section class="mb-10">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
            Modal
            {{ badge("Include", color="green") }}
        </h2>
        <p class="text-sm text-gray-500 mb-4">Supports Escape key and backdrop click to close.</p>
        {% with title="Confirm Delete", trigger_text="Open Modal", content="Are you sure you want to delete this item?
        This action cannot be undone." %}
        {% include "components/modal.html" %}
        {% endwith %}
    </section>

    {# ===== BUTTONS SECTION ===== #}
    <section class="mb-10">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
            Buttons
            {{ badge("Macro", color="purple") }}
        </h2>
        <div class="flex flex-wrap gap-3">
            {{ button("Primary", type="primary") }}
            {{ button("Secondary", type="secondary") }}
            {{ button("Danger", type="danger") }}
            {{ button("Ghost", type="ghost") }}
            {{ button("Disabled", type="primary", disabled=true) }}
            {{ button("With Icon", type="primary", icon="M12 4v16m8-8H4") }}
        </div>
    </section>

    {# ===== HELLO CONTROLLER (original) ===== #}
    <section class="mb-10">
        <h2 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
            Hello Controller
            {{ badge("Original", color="gray") }}
        </h2>
        <div data-controller="hello" class="p-4 border rounded-lg bg-gray-50">
            Loading Stimulus...
        </div>
    </section>
</div>
{% endblock %}